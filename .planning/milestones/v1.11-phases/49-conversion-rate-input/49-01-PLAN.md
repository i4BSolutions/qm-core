---
phase: 49-conversion-rate-input
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/ui/conversion-rate-input.tsx
autonomous: true

must_haves:
  truths:
    - "ConversionRateInput component renders a numeric input with 4 decimal places and thousand separators"
    - "ConversionRateInput accepts value/onValueChange props matching ExchangeRateInput API"
    - "ConversionRateInput has placeholder '1.0000' and enforces positive values only"
  artifacts:
    - path: "components/ui/conversion-rate-input.tsx"
      provides: "Reusable conversion rate input component"
      min_lines: 15
  key_links:
    - from: "components/ui/conversion-rate-input.tsx"
      to: "components/ui/amount-input.tsx"
      via: "import and wrapper"
      pattern: "import.*AmountInput"
---

<objective>
Create the ConversionRateInput component that mirrors ExchangeRateInput exactly.

Purpose: Provide a reusable numeric input for unit conversion rates (4 decimal places, thousand separators, positive values only) that all quantity-based forms will use in plans 02 and 03.
Output: `components/ui/conversion-rate-input.tsx`
</objective>

<execution_context>
@/home/yaungni/.claude/get-shit-done/workflows/execute-plan.md
@/home/yaungni/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Mirror this component exactly:
@components/ui/exchange-rate-input.tsx
@components/ui/amount-input.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ConversionRateInput component</name>
  <files>components/ui/conversion-rate-input.tsx</files>
  <action>
    Create `components/ui/conversion-rate-input.tsx` by mirroring `components/ui/exchange-rate-input.tsx` exactly:

    1. Copy the ExchangeRateInput pattern:
       - Import AmountInput and AmountInputProps from `@/components/ui/amount-input`
       - Export `ConversionRateInputProps` extending `Omit<AmountInputProps, "decimalScale">`
       - Create forwardRef component wrapping AmountInput with `decimalScale={4}`
       - Default placeholder: `"1.0000"`
       - Set displayName to `"ConversionRateInput"`

    2. The component should be functionally identical to ExchangeRateInput but with name/displayName changed.
       This is intentional - conversion rates and exchange rates both use 4 decimal places (DECIMAL(10,4) in DB).

    Do NOT add this to any barrel exports yet - plans 02 and 03 will import directly.
  </action>
  <verify>
    Run: `npx tsc --noEmit components/ui/conversion-rate-input.tsx 2>&1 || true`
    Verify the file exists and has no syntax errors. The overall build will still have Phase 47 errors until plans 02/03.
  </verify>
  <done>ConversionRateInput component exists at components/ui/conversion-rate-input.tsx, mirrors ExchangeRateInput API, uses 4 decimal places</done>
</task>

</tasks>

<verification>
- [ ] `components/ui/conversion-rate-input.tsx` exists
- [ ] Component wraps AmountInput with decimalScale=4
- [ ] Props interface extends AmountInputProps (minus decimalScale)
- [ ] Placeholder defaults to "1.0000"
- [ ] No TypeScript errors in the component file itself
</verification>

<success_criteria>
ConversionRateInput component is created and ready for integration in plans 02 and 03.
</success_criteria>

<output>
After completion, create `.planning/phases/49-conversion-rate-input/49-01-SUMMARY.md`
</output>
