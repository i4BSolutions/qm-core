# Requirements Archive: v1.1 QM System Enhancement

**Archived:** 2026-01-28
**Status:** ✅ SHIPPED

This is the archived requirements specification for v1.1.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

## v1.1 Requirements

**Defined:** 2025-01-27
**Core Value:** Users can reliably create purchase orders and receive inventory, with full visibility into request status and attached documentation.

### Bug Fixes (4/4 Complete)

- [x] **BUG-01**: Fix PO creation workflow — users cannot create purchase orders
- [x] **BUG-02**: Fix stock-in functionality — users cannot receive inventory
- [x] **BUG-03**: Verify invoice creation works correctly
- [x] **BUG-04**: Verify stock-out functionality works correctly

### File Attachments (10/10 In-Scope Complete)

- [x] **FILE-02**: User can drag-drop files to upload on QMRL detail page
- [x] **FILE-04**: User can drag-drop files to upload on QMHQ detail page
- [x] **FILE-05**: System validates file type (PDF, Word, Excel, PNG, JPG, GIF)
- [x] **FILE-06**: System validates file size (max 25MB per file)
- [x] **FILE-08**: User can view list of uploaded files sorted by upload date
- [x] **FILE-09**: User can preview images inline
- [x] **FILE-10**: User can preview PDFs in-app
- [x] **FILE-11**: User can see thumbnail previews in file list
- [x] **FILE-12**: User can delete files (if has edit access to parent entity)
- [x] **FILE-13**: User can download all files as ZIP

**Deferred to V2:**
- FILE-01: User can drag-drop files to upload on QMRL create form
- FILE-03: User can drag-drop files to upload on QMHQ create form
- FILE-07: System enforces max 10 files per entity (moved to Out of Scope)

### Dashboard (7/7 Complete)

- [x] **DASH-01**: Admin/Quartermaster sees live dashboard on /dashboard
- [x] **DASH-02**: Other roles redirected to their primary page from /dashboard
- [x] **DASH-03**: Dashboard shows QMRL counts by status group (to_do, in_progress, done)
- [x] **DASH-04**: Dashboard shows QMHQ counts by status group
- [x] **DASH-05**: Dashboard shows low stock alerts (items below 10 units)
- [x] **DASH-06**: Dashboard shows recent activity feed (5 most recent actions)
- [x] **DASH-07**: Dashboard shows recent stock movements

### UX Improvements (7/7 In-Scope Complete)

- [x] **UX-01**: User can click status badge on QMRL detail to change status via dropdown
- [x] **UX-02**: User can click status badge on QMHQ detail to change status via dropdown
- [x] **UX-03**: Quick status changes are logged in audit history
- [x] **UX-04**: User can click transaction row to open detail modal
- [x] **UX-05**: Transaction modal shows full transaction details
- [x] **UX-08**: Transaction amount/exchange rate are read-only (audit integrity)
- [x] **UX-09**: Money in/out date picker matches QMRL/QMHQ/PO date picker design

**Moved to Out of Scope:**
- UX-06: User can edit transaction date in modal (audit integrity)
- UX-07: User can edit transaction notes in modal (audit integrity)

### Invoice Behavior (2/2 Complete)

- [x] **INV-01**: Invoice line item quantity cannot exceed PO line item quantity
- [x] **INV-02**: Invoice total amount CAN exceed PO total amount (price flexibility)

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| BUG-01 | Phase 1 | ✅ Complete |
| BUG-02 | Phase 1 | ✅ Complete |
| BUG-03 | Phase 1 | ✅ Complete |
| BUG-04 | Phase 1 | ✅ Complete |
| INV-01 | Phase 1 | ✅ Complete |
| INV-02 | Phase 1 | ✅ Complete |
| FILE-05 | Phase 2 | ✅ Complete |
| FILE-06 | Phase 2 | ✅ Complete |
| FILE-12 | Phase 2 | ✅ Complete |
| FILE-02 | Phase 3 | ✅ Complete |
| FILE-04 | Phase 3 | ✅ Complete |
| FILE-08 | Phase 3 | ✅ Complete |
| FILE-11 | Phase 3 | ✅ Complete |
| FILE-09 | Phase 4 | ✅ Complete |
| FILE-10 | Phase 4 | ✅ Complete |
| FILE-13 | Phase 4 | ✅ Complete |
| DASH-01 | Phase 5 | ✅ Complete |
| DASH-02 | Phase 5 | ✅ Complete |
| DASH-03 | Phase 5 | ✅ Complete |
| DASH-04 | Phase 5 | ✅ Complete |
| DASH-05 | Phase 5 | ✅ Complete |
| DASH-06 | Phase 5 | ✅ Complete |
| DASH-07 | Phase 5 | ✅ Complete |
| UX-01 | Phase 6 | ✅ Complete |
| UX-02 | Phase 6 | ✅ Complete |
| UX-03 | Phase 6 | ✅ Complete |
| UX-04 | Phase 6 | ✅ Complete |
| UX-05 | Phase 6 | ✅ Complete |
| UX-08 | Phase 6 | ✅ Complete |
| UX-09 | Phase 6 | ✅ Complete |

## Out of Scope

| Feature | Reason |
|---------|--------|
| Real-time dashboard updates | Polling sufficient for low-frequency updates, adds complexity |
| Per-item stock thresholds | Global default (10 units) sufficient for V1.1 |
| Transaction amount editing | Locked for audit integrity by design |
| Transaction date/notes editing | View-only modal for audit integrity by design |
| Bulk status updates | Single status change sufficient for V1.1 |
| File attachments on PO/Invoice | QMRL/QMHQ scope first, extend in V2 |
| Mobile-specific file upload | Desktop web first, responsive design handles mobile |
| Max files per entity limit | No practical need for V1.1, users can manage own file count |
| Create form file uploads | Entity must exist first to attach files |

---

## Milestone Summary

**Shipped:** 28 of 28 in-scope requirements (100%)

**Adjusted During Implementation:**
- FILE-01, FILE-03: Deferred to V2 — entity must exist before attaching files
- FILE-07: Moved to Out of Scope — no practical need for file count limit
- UX-06, UX-07: Moved to Out of Scope — audit integrity requires view-only transactions

**Dropped:** None

---
*Archived: 2026-01-28 as part of v1.1 milestone completion*
