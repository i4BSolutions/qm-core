---
phase: 40-ui-consistency-rollout
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/(dashboard)/warehouse/page.tsx
  - app/(dashboard)/admin/contacts/page.tsx
  - app/(dashboard)/admin/suppliers/page.tsx
  - app/(dashboard)/admin/departments/page.tsx
  - app/(dashboard)/admin/categories/page.tsx
  - app/(dashboard)/admin/statuses/page.tsx
  - app/(dashboard)/admin/users/page.tsx
  - app/(dashboard)/item/page.tsx
autonomous: true

must_haves:
  truths:
    - "All 8 simple list/table pages display consistent page headers using PageHeader composite"
    - "All pages with inline h1 headers have been migrated to PageHeader component"
    - "No visual or functional regression on any migrated page"
  artifacts:
    - path: "app/(dashboard)/warehouse/page.tsx"
      provides: "Warehouse list with PageHeader"
      contains: "PageHeader"
    - path: "app/(dashboard)/admin/contacts/page.tsx"
      provides: "Contacts list with PageHeader"
      contains: "PageHeader"
    - path: "app/(dashboard)/admin/suppliers/page.tsx"
      provides: "Suppliers list with PageHeader"
      contains: "PageHeader"
    - path: "app/(dashboard)/admin/departments/page.tsx"
      provides: "Departments list with PageHeader"
      contains: "PageHeader"
    - path: "app/(dashboard)/admin/categories/page.tsx"
      provides: "Categories list with PageHeader"
      contains: "PageHeader"
    - path: "app/(dashboard)/admin/statuses/page.tsx"
      provides: "Statuses list with PageHeader"
      contains: "PageHeader"
    - path: "app/(dashboard)/admin/users/page.tsx"
      provides: "Users list with PageHeader"
      contains: "PageHeader"
    - path: "app/(dashboard)/item/page.tsx"
      provides: "Item list with PageHeader"
      contains: "PageHeader"
  key_links:
    - from: "all 8 pages"
      to: "components/composite/index.ts"
      via: "import { PageHeader } from '@/components/composite'"
      pattern: "from \"@/components/composite\""
---

<objective>
Migrate 8 simple list/table pages to use the PageHeader composite component, replacing inline h1 header JSX with standardized layout.

Purpose: Establish consistent page headers across all admin and simple list pages (lowest risk, highest volume).
Output: 8 pages using PageHeader composite with zero regression.
</objective>

<execution_context>
@/home/yaungni/.claude/get-shit-done/workflows/execute-plan.md
@/home/yaungni/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/36-ui-component-standardization/36-03-SUMMARY.md
@components/composite/page-header.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate admin pages to PageHeader composite (6 pages)</name>
  <files>
    app/(dashboard)/admin/contacts/page.tsx
    app/(dashboard)/admin/suppliers/page.tsx
    app/(dashboard)/admin/departments/page.tsx
    app/(dashboard)/admin/categories/page.tsx
    app/(dashboard)/admin/statuses/page.tsx
    app/(dashboard)/admin/users/page.tsx
  </files>
  <action>
For each of the 6 admin pages, apply the surgical JSX replacement pattern from Phase 36-03:

1. Read the full file first. Identify the inline header JSX section (typically a div with h1 using `text-3xl font-bold tracking-tight text-slate-200` and description text).

2. Add import: `import { PageHeader } from "@/components/composite";`

3. Replace the inline header div with:
```tsx
<PageHeader
  title="{Page Title}"
  description="{existing description text or dynamic count}"
  actions={/* existing action buttons (New/Create button) */}
/>
```

4. Do NOT touch any data fetching, state management, dialog handling, or table columns.

5. Admin pages have a common pattern:
   - contacts: "Contact Persons" title, "New Contact" button
   - suppliers: "Suppliers" title, "New Supplier" button
   - departments: "Departments" title, "New Department" button
   - categories: "Categories" title, dynamic description
   - statuses: "Status Configuration" title, dynamic description
   - users: "User Management" title, "Add User" button

6. After each file edit, verify with `npx tsc --noEmit` to catch import or type issues.

7. Preserve all existing permission checks (canCreate, canUpdate, canDelete guards on action buttons). Pass the conditionally-rendered button into the actions slot.
  </action>
  <verify>
Run `npx tsc --noEmit` — zero TypeScript errors.
Run `grep -l 'from "@/components/composite"' app/\(dashboard\)/admin/*/page.tsx` — all 6 admin page files listed.
Run `grep -c 'text-3xl font-bold tracking-tight' app/\(dashboard\)/admin/*/page.tsx` — zero matches (all inline headers replaced).
  </verify>
  <done>All 6 admin pages import PageHeader from @/components/composite and use it for the page header. No inline h1 header patterns remain. TypeScript compiles without errors.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate warehouse and item list pages to PageHeader composite (2 pages)</name>
  <files>
    app/(dashboard)/warehouse/page.tsx
    app/(dashboard)/item/page.tsx
  </files>
  <action>
Apply the same surgical JSX replacement pattern to warehouse and item list pages:

1. **Warehouse page** (~214 lines):
   - Read full file. Find inline header with "Warehouses" h1.
   - Add `import { PageHeader } from "@/components/composite";`
   - Replace header div with `<PageHeader title="Warehouses" description="Manage warehouse locations" actions={<Button onClick={handleCreate}><Plus className="mr-2 h-4 w-4" /> New Warehouse</Button>} />`
   - Preserve: fetchData, handleDelete, handleEdit, columns, DataTable, WarehouseDialog

2. **Item list page** (~298 lines):
   - Read full file. Find inline header with "Items" h1.
   - Add `import { PageHeader } from "@/components/composite";`
   - Replace header div with `<PageHeader title="Items" description={dynamic description} actions={existing create button} />`
   - Note: Item page may already import from composite (check first - item/[id] does, but item/page.tsx may not)
   - Preserve: All search/filter logic, DataTable, pagination

3. After both edits, run `npx tsc --noEmit` to verify.

4. Run `npm run build` to verify production build passes after all Wave 1 Plan 01 changes.
  </action>
  <verify>
Run `npx tsc --noEmit` — zero errors.
Run `npm run build` — production build succeeds.
Run `grep 'PageHeader' app/\(dashboard\)/warehouse/page.tsx app/\(dashboard\)/item/page.tsx` — both files contain PageHeader usage.
  </verify>
  <done>Warehouse and Item list pages use PageHeader composite. Production build passes. No visual or functional regression in table rendering, pagination, or CRUD dialogs.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with zero errors
2. `npm run build` succeeds
3. All 8 pages import PageHeader from "@/components/composite"
4. No remaining inline h1 headers (`text-3xl font-bold tracking-tight`) in any of the 8 files
5. All existing functionality preserved (data fetching, filters, tables, dialogs, permission guards)
</verification>

<success_criteria>
- 8 simple list/table pages migrated to PageHeader composite
- Zero TypeScript errors
- Production build passes
- No inline header patterns remain in migrated files
</success_criteria>

<output>
After completion, create `.planning/phases/40-ui-consistency-rollout/40-01-SUMMARY.md`
</output>
