---
phase: 46-composite-type-safety
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/composite/form-field.tsx
  - components/composite/page-header.tsx
  - components/composite/detail-page-layout.tsx
  - components/composite/form-section.tsx
autonomous: true

must_haves:
  truths:
    - "FormField label prop retains ReactNode (2 usages pass JSX with conditional lock icons)"
    - "PageHeader title prop only accepts string values (already the case)"
    - "FormSection title prop retains ReactNode for JSX usage"
    - "DetailPageLayout header prop retains ReactNode for complex header slots"
    - "All four composite components have JSDoc-annotated prop interfaces"
    - "TypeScript compilation succeeds with zero new errors across all pages"
  artifacts:
    - path: "components/composite/form-field.tsx"
      provides: "FormField with JSDoc-annotated props documenting ReactNode label usage"
      contains: "/** Field label. Accepts ReactNode"
    - path: "components/composite/page-header.tsx"
      provides: "PageHeader with JSDoc-annotated props (title already string)"
      contains: "/** Plain text page title"
    - path: "components/composite/detail-page-layout.tsx"
      provides: "DetailPageLayout with JSDoc-annotated ReactNode props"
      contains: "/** Header content slot"
    - path: "components/composite/form-section.tsx"
      provides: "FormSection with JSDoc-annotated ReactNode props"
      contains: "/** Section heading"
  key_links:
    - from: "components/composite/form-field.tsx"
      to: "app/(dashboard)/po/new/page.tsx, app/(dashboard)/qmhq/new/page.tsx"
      via: "label prop accepting JSX (lock icon indicators)"
      pattern: '<FormField label=\{'
---

<objective>
Add JSDoc annotations to all composite component prop interfaces to document type intent and clarify which props accept plain strings vs ReactNode and why.

Purpose: After auditing all usages, FormField.label must remain ReactNode (2 files pass JSX with conditional lock icons: po/new and qmhq/new). PageHeader.title is already string. FormSection.title and DetailPageLayout.header are correctly ReactNode. JSDoc annotations codify these contracts so future developers understand the intent.
Output: JSDoc-annotated composite component prop interfaces with verified TypeScript compilation.
</objective>

<execution_context>
@/home/yaungni/.claude/get-shit-done/workflows/execute-plan.md
@/home/yaungni/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@components/composite/form-field.tsx
@components/composite/page-header.tsx
@components/composite/detail-page-layout.tsx
@components/composite/form-section.tsx
@components/composite/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add JSDoc annotations to all composite component prop types</name>
  <files>
components/composite/form-field.tsx
components/composite/page-header.tsx
components/composite/form-section.tsx
components/composite/detail-page-layout.tsx
  </files>
  <action>
Add JSDoc comments to the prop interfaces of all four composite components to document the type intent. Do NOT change any prop types — only add documentation.

**Audit result (for context — no type changes needed):**
- `FormField.label` stays `React.ReactNode` — 2 files pass JSX with conditional lock icons:
  - `app/(dashboard)/po/new/page.tsx` (line ~336): `<span>` with lock icon + "Inherited" badge
  - `app/(dashboard)/qmhq/new/page.tsx` (line ~536): `<span>` with lock icon + "Locked" badge
- `PageHeader.title` is already `string` — correct, no JSX usages found
- `FormSection.title` stays `React.ReactNode` — used with JSX fragments in invoice/new, qmhq/new, stock-in, stock-out-requests/new
- `DetailPageLayout.header` stays `React.ReactNode` — all usages pass complex JSX

**form-field.tsx** — Add JSDoc to `FormFieldProps`:
- `label`: `/** Field label. Accepts ReactNode for labels with inline indicators (e.g., lock icons in po/new and qmhq/new). Most usages pass plain strings. */`
- `error`: add JSDoc if not present
- `hint`: add JSDoc if not present

**page-header.tsx** — Add JSDoc to `PageHeaderProps`:
- `title`: `/** Plain text page title. Rendered as h1. */` — already `string`, no type change
- `description`: `/** Optional subtitle. Accepts ReactNode for template literals and code elements. */`
- `badge`: `/** Optional badge slot. Accepts ReactNode for icon+label combinations. */`
- `actions`: `/** Optional actions slot. Accepts ReactNode for buttons/links. */`

**form-section.tsx** — Add JSDoc to `FormSectionProps`:
- `title`: `/** Section heading. Accepts ReactNode for dynamic titles with counts or required indicators. */`
- `icon`: `/** Optional icon displayed next to the title. */`

**detail-page-layout.tsx** — Add JSDoc to `DetailPageLayoutProps`:
- `header`: `/** Header content slot. Accepts ReactNode for title + badges + metadata combinations. */`
- `actions`: `/** Optional action buttons slot. */`
- `kpiPanel`: `/** Optional KPI metrics panel. */`

Do NOT change any types. The goal is documentation of the type contracts only.
  </action>
  <verify>Run `npx tsc --noEmit` and confirm zero TypeScript errors. Run `npm run build` to confirm production build succeeds.</verify>
  <done>All composite component prop interfaces have JSDoc comments documenting whether each prop is string-only or ReactNode and why. No types changed. Build passes cleanly.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with zero errors
2. `npm run build` succeeds
3. `FormField` label prop type remains `React.ReactNode` (correctly retained — 2 usages pass JSX with lock icons in po/new and qmhq/new)
4. `PageHeader` title prop type is `string` (was already string, confirmed unchanged)
5. `FormSection` title prop type remains `React.ReactNode` (uses JSX in invoice/new, qmhq/new, stock-in, stock-out-requests/new)
6. `DetailPageLayout` header prop type remains `React.ReactNode` (all usages pass complex JSX)
7. All four composite components have JSDoc-annotated prop interfaces
8. No prop types were changed — only JSDoc annotations added
</verification>

<success_criteria>
- FormField.label remains `React.ReactNode` (correctly retained — po/new and qmhq/new pass JSX with conditional lock icons)
- PageHeader.title remains `string` (was already correct)
- FormSection.title remains `React.ReactNode` (genuinely needs it — used with JSX fragments, `<span>` elements, and `<>...</>`)
- DetailPageLayout.header remains `React.ReactNode` (genuinely needs it — all usages pass complex JSX)
- PageHeader.description remains `React.ReactNode` (genuinely needs it — used with `<code>` elements in edit pages)
- All four composite component prop interfaces have JSDoc annotations documenting type intent
- TypeScript compilation succeeds with zero new errors
- Production build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/46-composite-type-safety/46-01-SUMMARY.md`
</output>
