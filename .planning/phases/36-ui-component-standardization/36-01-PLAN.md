---
phase: 36-ui-component-standardization
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/composite/page-header.tsx
  - components/composite/filter-bar.tsx
  - components/composite/action-buttons.tsx
  - components/composite/form-field.tsx
  - components/composite/form-section.tsx
autonomous: true

must_haves:
  truths:
    - "PageHeader component renders title, optional description, optional badge slot, and optional actions slot with consistent spacing"
    - "FilterBar compound component renders search input with icon and select dropdowns in a consistent command-panel layout"
    - "ActionButtons component groups primary and secondary buttons with consistent gap and alignment"
    - "FormField component wraps label, children, and error message with consistent spacing and required indicator"
    - "FormSection component wraps titled sections with CVA spacing variants and command-panel styling"
  artifacts:
    - path: "components/composite/page-header.tsx"
      provides: "Slot-based page header with title, description, badge, actions"
      contains: "export function PageHeader"
    - path: "components/composite/filter-bar.tsx"
      provides: "Compound component with Search and Select sub-components"
      contains: "FilterBar.Search"
    - path: "components/composite/action-buttons.tsx"
      provides: "Button group with primary/secondary layout"
      contains: "export function ActionButtons"
    - path: "components/composite/form-field.tsx"
      provides: "Label + input + error wrapper"
      contains: "export function FormField"
    - path: "components/composite/form-section.tsx"
      provides: "CVA-variant section container"
      contains: "formSectionVariants"
  key_links:
    - from: "components/composite/filter-bar.tsx"
      to: "components/ui/input.tsx"
      via: "import"
      pattern: "from \"@/components/ui/input\""
    - from: "components/composite/filter-bar.tsx"
      to: "components/ui/select.tsx"
      via: "import"
      pattern: "from \"@/components/ui/select\""
    - from: "components/composite/form-field.tsx"
      to: "components/ui/label.tsx"
      via: "import"
      pattern: "from \"@/components/ui/label\""
    - from: "components/composite/form-section.tsx"
      to: "class-variance-authority"
      via: "import"
      pattern: "from \"class-variance-authority\""
---

<objective>
Create 5 core composite components (PageHeader, FilterBar, ActionButtons, FormField, FormSection) that standardize page headers, filter bars, button grouping, and form layouts across the QM system.

Purpose: These composites wrap existing UI primitives (Button, Input, Select, Label) into higher-level patterns that enforce consistent spacing, typography, and layout structure. They are the foundation for migrating all pages in Phase 40.

Output: 5 new files in `components/composite/` directory, each exporting a typed React component.
</objective>

<execution_context>
@/home/yaungni/.claude/get-shit-done/workflows/execute-plan.md
@/home/yaungni/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/36-ui-component-standardization/36-RESEARCH.md

Reference existing patterns:
@components/ui/button.tsx — CVA variant pattern to follow
@components/ui/label.tsx — Label component used by FormField
@components/ui/input.tsx — Input component used by FilterBar
@components/ui/select.tsx — Select components used by FilterBar
@app/(dashboard)/qmrl/page.tsx — Source of page header and filter bar patterns to extract
@app/(dashboard)/po/page.tsx — Source of page header and filter bar patterns to extract
@app/(dashboard)/qmrl/new/page.tsx — Source of form section and field patterns to extract
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create PageHeader, ActionButtons, FormField, and FormSection composites</name>
  <files>
    components/composite/page-header.tsx
    components/composite/action-buttons.tsx
    components/composite/form-field.tsx
    components/composite/form-section.tsx
  </files>
  <action>
Create the `components/composite/` directory and implement 4 presentational Server Components (no "use client" directive).

**page-header.tsx:**
- Export `PageHeader` function component
- Props interface `PageHeaderProps`: `title: string`, `description?: string`, `badge?: React.ReactNode` (slot for status badge above title), `actions?: React.ReactNode` (slot for action buttons), `className?: string` (wrapper only)
- Layout: `div` with `flex items-start justify-between mb-6` (matches current QMRL/PO page headers)
- Left side: optional badge row (`flex items-center gap-3 mb-2`), then `h1` with `text-3xl font-bold tracking-tight text-slate-200`, then optional description `p` with `mt-1 text-slate-400`
- Right side: actions wrapper `div` with `flex items-center gap-2 ml-4`
- Use `cn()` from `@/lib/utils` for className merging on wrapper only
- Include JSDoc with spacing documentation: "Bottom margin: mb-6 (24px), Title/description gap: mt-1 (4px), Action button gap: gap-2 (8px)"

**action-buttons.tsx:**
- Export `ActionButtons` function component
- Props: `children: React.ReactNode`, `align?: "left" | "right"` (default "right"), `className?: string`
- Layout: `div` with `flex items-center gap-2`, justify based on align prop (`justify-end` for right, `justify-start` for left)
- Use `cn()` for merging

**form-field.tsx:**
- Export `FormField` function component
- Props: `label: string`, `htmlFor?: string`, `required?: boolean`, `error?: string`, `hint?: string`, `children: React.ReactNode`, `className?: string`
- Layout: outer `div` with `space-y-2`
- Label uses `Label` from `@/components/ui/label` with `text-slate-300 font-medium` class. If required, append `<span className="text-red-400 ml-1">*</span>`
- Children slot rendered as-is (consumer passes Input, Select, etc.)
- Error message: conditional `p` with `text-sm text-red-400 flex items-center gap-1`, prefix with warning icon (use Lucide `AlertCircle` at h-3 w-3)
- Optional hint: `p` with `text-xs text-slate-500` rendered below children but above error

**form-section.tsx:**
- Export `FormSection` function component and `formSectionVariants`
- Use CVA with base classes `"command-panel corner-accents"` (matches existing section styling in globals.css)
- Variants: `spacing` with `default: "p-6 space-y-4"`, `compact: "p-4 space-y-3"`, `relaxed: "p-8 space-y-6"`
- Props: extend `VariantProps<typeof formSectionVariants>` plus `title: string`, `icon?: React.ReactNode`, `children: React.ReactNode`, `animationDelay?: string`, `className?: string`
- Layout: outer `div` with CVA classes, section header `div` with `section-header` class (existing CSS), icon and h3 inside it, then content `div` with `space-y-4` wrapping children
- Apply `animationDelay` via `style` prop if provided (existing pattern from item detail page)
- Add `animate-slide-up` to base CVA classes (matches existing animation pattern)

All 4 components: import `cn` from `@/lib/utils`. Follow existing import order convention (React first, then lucide-react, then internal @/ imports, then types).
  </action>
  <verify>
Run `npx tsc --noEmit` from project root. All 4 files must compile without TypeScript errors. Verify files exist with `ls components/composite/`.
  </verify>
  <done>
4 composite components exist in components/composite/, all compile cleanly, follow existing CVA/cn patterns from button.tsx, and are Server Components (no "use client" directive).
  </done>
</task>

<task type="auto">
  <name>Task 2: Create FilterBar compound component</name>
  <files>
    components/composite/filter-bar.tsx
  </files>
  <action>
Create a Client Component (`"use client"` directive required — sub-components have onChange handlers).

**filter-bar.tsx:**
- Export `FilterBar` function component as the parent wrapper
- Props: `children: React.ReactNode`, `className?: string`
- Layout: `div` with `cn("command-panel mb-6", className)`, inner `div` with `flex flex-wrap items-center gap-4`
- This matches the existing filter bar pattern from QMRL and PO list pages

**FilterBar.Search sub-component:**
- Assign to `FilterBar.Search` as a named function
- Props interface `FilterBarSearchProps`: `value: string`, `onChange: (value: string) => void`, `placeholder?: string` (default "Search...")
- Layout: relative wrapper `div` with `relative flex-1 min-w-[240px] max-w-md`
- Search icon from lucide-react positioned absolutely: `absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400`
- Render `Input` from `@/components/ui/input` with `pl-10 bg-slate-800/50 border-slate-700 focus:border-amber-500/50 font-mono text-sm` — these classes match the exact existing search input styling from QMRL and PO pages
- Wire onChange: `onChange={(e) => onChange(e.target.value)}`

**FilterBar.Select sub-component:**
- Assign to `FilterBar.Select` as a named function
- Props interface `FilterBarSelectProps`: `value: string`, `onChange: (value: string) => void`, `options: { value: string; label: string }[]`, `placeholder: string`, `icon?: React.ReactNode`, `width?: string` (default "w-[180px]")
- Render `Select`, `SelectTrigger`, `SelectValue`, `SelectContent`, `SelectItem` from `@/components/ui/select`
- SelectTrigger classes: `cn(width, "bg-slate-800/50 border-slate-700")`
- If icon provided, render it with `mr-2` spacing inside trigger
- Map options to SelectItem components

**FilterBar.DateRange sub-component (optional, for future use):**
- Skip for now — not used in current pilot pages. Can be added in Phase 40.

Import order: "use client" first, then React (not needed unless using hooks), then lucide-react Search icon, then @/components/ui/* imports, then @/lib/utils.

**TypeScript typing for compound component:**
Use the pattern:
```typescript
type FilterBarComponent = React.FC<FilterBarProps> & {
  Search: React.FC<FilterBarSearchProps>;
  Select: React.FC<FilterBarSelectProps>;
};
```
Then cast: `(FilterBar as FilterBarComponent).Search = ...` or use direct assignment after function declaration.
  </action>
  <verify>
Run `npx tsc --noEmit` from project root. FilterBar and its sub-components must compile. Verify compound pattern works by checking the file exports FilterBar with .Search and .Select properties.
  </verify>
  <done>
FilterBar compound component exists at components/composite/filter-bar.tsx with .Search and .Select sub-components, is a Client Component, and compiles without TypeScript errors.
  </done>
</task>

</tasks>

<verification>
1. `ls components/composite/` shows 5 files: page-header.tsx, filter-bar.tsx, action-buttons.tsx, form-field.tsx, form-section.tsx
2. `npx tsc --noEmit` passes with no errors
3. page-header.tsx, action-buttons.tsx, form-field.tsx, form-section.tsx do NOT contain "use client"
4. filter-bar.tsx DOES contain "use client"
5. All components import `cn` from `@/lib/utils`
6. form-section.tsx imports from `class-variance-authority`
7. form-field.tsx imports `Label` from `@/components/ui/label`
</verification>

<success_criteria>
- 5 composite component files created and compiling
- PageHeader accepts title, description, badge, actions slots
- FilterBar has compound .Search and .Select sub-components
- FormSection uses CVA with spacing variants (default/compact/relaxed)
- FormField wraps label + children + error with consistent spacing
- ActionButtons groups children with configurable alignment
- No new npm dependencies required (all use existing packages)
</success_criteria>

<output>
After completion, create `.planning/phases/36-ui-component-standardization/36-01-SUMMARY.md`
</output>
