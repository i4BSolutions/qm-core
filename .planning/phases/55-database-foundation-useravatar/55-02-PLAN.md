---
phase: 55-database-foundation-useravatar
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - components/ui/user-avatar.tsx
autonomous: true
requirements:
  - AVTR-01
  - AVTR-04

must_haves:
  truths:
    - "boring-avatars package is installed and listed in package.json dependencies"
    - "UserAvatar component renders a deterministic SVG avatar based on fullName prop"
    - "Same fullName always produces the same avatar (deterministic across pages)"
    - "UserAvatar renders using the Beam variant with default color palette"
    - "UserAvatar renders as a circle (not square)"
    - "UserAvatar accepts optional size prop defaulting to 28px"
  artifacts:
    - path: "components/ui/user-avatar.tsx"
      provides: "Shared UserAvatar component for all downstream consumers"
      contains: "boring-avatars"
    - path: "package.json"
      provides: "boring-avatars dependency"
      contains: "boring-avatars"
  key_links:
    - from: "components/ui/user-avatar.tsx"
      to: "boring-avatars"
      via: "import Avatar from 'boring-avatars'"
      pattern: "import.*boring-avatars"
---

<objective>
Install boring-avatars and create a shared UserAvatar component for deterministic user avatars.

Purpose: The UserAvatar component is used by phases 56, 57, and 58 to display user avatars in list views, approval dialogs, history tabs, and comment cards. It must be a pure function of `fullName` to ensure consistency and prevent N+1 queries.

Output: Installed npm package and a reusable client component.
</objective>

<execution_context>
@/home/yaungni/.claude/get-shit-done/workflows/execute-plan.md
@/home/yaungni/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/55-database-foundation-useravatar/55-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install boring-avatars and create UserAvatar component</name>
  <files>package.json, components/ui/user-avatar.tsx</files>
  <action>
**Step 1: Install boring-avatars**

Run `npm install boring-avatars` to install the package. This adds boring-avatars (v2.x, ESM + TypeScript native) to package.json dependencies.

**Step 2: Create UserAvatar component**

Create `/components/ui/user-avatar.tsx` as a client component (`"use client"` directive required because boring-avatars generates SVG via JavaScript and cannot run as a React Server Component).

```tsx
"use client";

import Avatar from "boring-avatars";

interface UserAvatarProps {
  fullName: string;
  size?: number;
  className?: string;
}

export function UserAvatar({ fullName, size = 28, className }: UserAvatarProps) {
  return (
    <span
      className={className}
      style={{ display: "inline-flex", flexShrink: 0 }}
    >
      <Avatar
        name={fullName}
        variant="beam"
        size={size}
      />
    </span>
  );
}
```

Implementation details per locked decisions:
- **Beam variant**: Simple smiley face with geometric shapes (locked decision).
- **Default color palette**: No `colors` prop passed — uses library defaults (locked decision).
- **Circle rendering**: boring-avatars `square` prop defaults to `false`, rendering a circle (locked decision: circle with clipped overflow).
- **No tooltip**: Name is always shown alongside the avatar (locked decision) — parent renders the name separately.
- **No fallback**: `fullName` is always present — required field on user creation (locked decision).
- **Data-passive**: Accepts `fullName: string` only, no internal data fetching, no userId prop (v1.12 key decision preventing N+1 queries).
- **Size default 28px**: Sized for list row inline usage (phases 56, 57). Other sizes: 32 for comment cards (phase 58), 40 for header (future).
- **No border**: The component renders cleanly without a border ring. Per Claude's discretion, the Beam variant has sufficient visual contrast against dark backgrounds without an explicit border.

The `span` wrapper with `inline-flex` and `flexShrink: 0` ensures the avatar stays properly sized when used in flex layouts alongside text.

**Step 3: Verify import works**

Ensure the component can be imported from `@/components/ui/user-avatar` without errors. Run type-check to verify.
  </action>
  <verify>
1. Run `npm ls boring-avatars` to confirm the package is installed.
2. Run `npm run type-check` (or `npx tsc --noEmit`) to verify TypeScript compiles cleanly with the new component.
3. Verify the component file exists at `components/ui/user-avatar.tsx` and contains `"use client"`, `import Avatar from "boring-avatars"`, `variant="beam"`, and `size={size}`.
  </verify>
  <done>
boring-avatars is installed in package.json. UserAvatar component exists at `components/ui/user-avatar.tsx`, accepts `fullName: string` and optional `size` (default 28), renders a deterministic Beam-variant circle avatar using boring-avatars default palette. The component is a pure function of fullName — same name always produces the same SVG.
  </done>
</task>

</tasks>

<verification>
1. `npm ls boring-avatars` shows the package installed
2. `components/ui/user-avatar.tsx` exists with correct implementation
3. TypeScript compiles without errors
4. Component uses "use client" directive
5. Component uses Beam variant, default colors, circle shape
6. Component accepts fullName and optional size props
</verification>

<success_criteria>
- boring-avatars is in package.json dependencies
- UserAvatar component at components/ui/user-avatar.tsx renders deterministic SVG avatars
- Same fullName input always produces the same avatar output
- TypeScript compilation passes
</success_criteria>

<output>
After completion, create `.planning/phases/55-database-foundation-useravatar/55-02-SUMMARY.md`
</output>
