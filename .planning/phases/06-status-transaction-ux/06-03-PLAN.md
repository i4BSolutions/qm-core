---
phase: 06-status-transaction-ux
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - components/ui/calendar.tsx
  - components/ui/date-picker.tsx
autonomous: true

must_haves:
  truths:
    - "Calendar displays DD/MM/YYYY format consistently"
    - "No week numbers shown in calendar popup"
    - "Week starts on Monday (ISO 8601 standard)"
    - "Today button allows quick selection of current date"
    - "Click-only navigation (no keyboard arrow support)"
  artifacts:
    - path: "components/ui/calendar.tsx"
      provides: "Calendar with consistent configuration"
      exports: ["Calendar"]
    - path: "components/ui/date-picker.tsx"
      provides: "DatePicker with DD/MM/YYYY format and Today button"
      exports: ["DatePicker"]
  key_links:
    - from: "components/ui/date-picker.tsx"
      to: "components/ui/calendar.tsx"
      via: "imports and renders"
      pattern: "<Calendar"
---

<objective>
Standardize date picker UI across all forms for consistent user experience.

Purpose: Ensure date picker calendar popup style matches across QMRL, QMHQ, PO, and money in/out forms with DD/MM/YYYY format.
Output: Updated Calendar and DatePicker components with consistent configuration.
</objective>

<execution_context>
@C:\Users\User\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\User\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-status-transaction-ux/06-CONTEXT.md
@.planning/phases/06-status-transaction-ux/06-RESEARCH.md

@components/ui/calendar.tsx
@components/ui/date-picker.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update Calendar component with standardized configuration</name>
  <files>
    components/ui/calendar.tsx
  </files>
  <action>
Modify the Calendar component to enforce consistent configuration:

1. **Add `weekStartsOn` prop** to DayPicker:
   - Set `weekStartsOn={1}` (Monday = 1, Sunday = 0)
   - This follows ISO 8601 standard and Myanmar business week per RESEARCH.md

2. **Ensure `showWeekNumber` is NOT set** (or explicitly `showWeekNumber={false}`):
   - Per CONTEXT.md: "No week numbers shown"
   - Default is false, but make it explicit for clarity

3. **Keep existing configuration:**
   - `showOutsideDays={true}` (already set)
   - Dark theme styling (already in classNames)

4. **No keyboard navigation changes needed:**
   - react-day-picker v8 defaults to no keyboard arrow support for single mode
   - Per CONTEXT.md: "Click/touch only navigation (no keyboard arrow key support)"

The Calendar component is a primitive that will be used by DatePicker with additional configuration.
  </action>
  <verify>
- `npm run type-check` passes
- Calendar component renders with Monday as first day of week
- No week numbers column visible
  </verify>
  <done>
- Calendar starts week on Monday
- No week numbers displayed
- Existing dark theme styling preserved
  </done>
</task>

<task type="auto">
  <name>Task 2: Update DatePicker with DD/MM/YYYY format and Today button</name>
  <files>
    components/ui/date-picker.tsx
  </files>
  <action>
Modify the DatePicker component to use DD/MM/YYYY format and add Today button:

1. **Change date format in button display:**
   - Current: `format(date, "PPP")` (locale-dependent, e.g., "January 28, 2026")
   - Change to: `format(date, "dd/MM/yyyy")` (e.g., "28/01/2026")
   - This matches CONTEXT.md requirement: "Display format: DD/MM/YYYY"

2. **Add Today button in PopoverContent:**
   - Place below the Calendar component
   - Button text: "Today"
   - On click: `onDateChange(new Date())`
   - Styled to match dark theme (ghost variant, text-amber-400 hover)
   - Separator line above button to visually separate from calendar

   ```tsx
   <PopoverContent className="w-auto p-0 bg-slate-900 border-slate-700" align="start">
     <Calendar
       mode="single"
       selected={date}
       onSelect={onDateChange}
       disabled={disabledDays}
       initialFocus
     />
     <div className="border-t border-slate-700 p-2">
       <Button
         variant="ghost"
         size="sm"
         className="w-full text-amber-400 hover:text-amber-300 hover:bg-slate-800"
         onClick={() => onDateChange(new Date())}
       >
         Today
       </Button>
     </div>
   </PopoverContent>
   ```

3. **Ensure date-fns import is correct:**
   - Already imports `format` from "date-fns"
   - No additional imports needed

4. **Keep existing functionality:**
   - minDate/maxDate constraints (disabledDays)
   - Disabled state
   - Placeholder text
   - Custom className support
  </action>
  <verify>
- `npm run build` succeeds
- DatePicker button shows date in DD/MM/YYYY format (e.g., "28/01/2026")
- Calendar popup shows Today button below the calendar
- Clicking Today selects current date and closes popover
  </verify>
  <done>
- Date displayed as DD/MM/YYYY in button
- Today button appears in calendar popup
- Today button selects current date
  </done>
</task>

</tasks>

<verification>
1. Navigate to any form with DatePicker (e.g., `/qmrl/new`)
2. Click on a date picker field
3. Verify calendar popup opens
4. Verify week starts on Monday (Mon, Tue, Wed... as first row)
5. Verify no week numbers column on left side
6. Verify "Today" button appears below the calendar
7. Click Today button
8. Verify current date is selected
9. Verify date displays in DD/MM/YYYY format in the input
10. Check other forms (QMHQ, PO) use same styling
</verification>

<success_criteria>
- Calendar week starts on Monday
- No week numbers displayed
- Date format is DD/MM/YYYY (e.g., "28/01/2026")
- Today button appears in calendar popup
- Clicking Today selects current date
- All forms using DatePicker get consistent styling automatically
</success_criteria>

<output>
After completion, create `.planning/phases/06-status-transaction-ux/06-03-SUMMARY.md`
</output>
